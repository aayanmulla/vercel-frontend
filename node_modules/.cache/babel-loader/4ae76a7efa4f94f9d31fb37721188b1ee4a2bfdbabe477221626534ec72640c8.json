{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import StylePrimarySmall from\"../../components/StylePrimarySmall/StylePrimarySmall.jsx\";import{useNavigate}from\"react-router-dom\";import{Link}from\"react-router-dom\";import\"./NavBar.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=()=>{const navigate=useNavigate();const[user,setUser]=useState(null);const[dropdownOpen,setDropdownOpen]=useState(false);const dropdownRef=useRef(null);const[isScrolled,setIsScrolled]=useState(false);// Function to get user data\nconst fetchUser=()=>{const storedUser=localStorage.getItem(\"user\");if(storedUser){var _parsedUser$username;const parsedUser=JSON.parse(storedUser);// ✅ Generate profile image if missing\nconst firstLetter=((_parsedUser$username=parsedUser.username)===null||_parsedUser$username===void 0?void 0:_parsedUser$username.charAt(0).toUpperCase())||\"U\";const profileImageUrl=parsedUser.profileImage||`https://ui-avatars.com/api/?name=${firstLetter}&background=random&color=fff&size=128`;setUser({...parsedUser,profileImage:profileImageUrl});}};// ✅ Detect scroll and change navbar appearance\nuseEffect(()=>{const handleScroll=()=>{setIsScrolled(window.scrollY>50);// Change navbar when scrolled 50px\n};window.addEventListener(\"scroll\",handleScroll);return()=>{window.removeEventListener(\"scroll\",handleScroll);};},[]);// ✅ Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setDropdownOpen(false);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>{document.removeEventListener(\"mousedown\",handleClickOutside);};},[]);useEffect(()=>{fetchUser();// ✅ Fetch when Navbar mounts\n// ✅ Listen for localStorage changes (fixes issue when data updates)\nwindow.addEventListener(\"storage\",fetchUser);return()=>{window.removeEventListener(\"storage\",fetchUser);};},[]);const handleLogout=()=>{localStorage.removeItem(\"user\");localStorage.removeItem(\"token\");setUser(null);navigate(\"/login\");};const scrollToSection=sectionId=>{const section=document.getElementById(sectionId);if(section){section.scrollIntoView({behavior:\"smooth\",block:\"start\"});// Wait for the scrolling to complete before making adjustments\nsetTimeout(()=>{requestAnimationFrame(()=>{if(sectionId===\"services\"){window.scrollBy({top:-70,behavior:\"smooth\"});// Adjust as needed\n}else if(sectionId===\"aboutus\"){window.scrollBy({top:-50,behavior:\"smooth\"});// Adjust as needed\n}});},700);// Adjust timeout duration to ensure smooth scrolling\n}};// Handlers for specific sections\nconst handleHomeClick=()=>scrollToSection(\"home\");const handleServicesClick=()=>scrollToSection(\"services\");const handleAboutUsClick=()=>scrollToSection(\"aboutus\");const handleFillProfile=()=>{navigate(\"/fillprofile\",{state:{goToFillProfile:true}});};return/*#__PURE__*/_jsx(\"nav\",{className:`navbar navbar-expand-lg navbar-light ${isScrolled?\"scrolled\":\"\"}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"navbar-brand\",children:/*#__PURE__*/_jsx(\"img\",{className:\"navbar-logo\",alt:\"Parkez Logo\",src:\"https://c.animaapp.com/BPgiiEYf/img/parkez-nobg-1.png\",style:{cursor:\"pointer\"}})}),/*#__PURE__*/_jsx(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\"#navbarContent\",\"aria-controls\":\"navbarContent\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\",children:/*#__PURE__*/_jsx(\"span\",{className:\"navbar-toggler-icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarContent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav  mb-2 mb-lg-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-item\",onClick:handleHomeClick,style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"span\",{className:\"nav-link\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-item\",onClick:handleServicesClick,style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"span\",{className:\"nav-link\",children:\"Our Services\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-item\",onClick:handleAboutUsClick,style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"span\",{className:\"nav-link\",children:\"About Us\"})})]}),user?/*#__PURE__*/_jsx(\"div\",{className:\"navbar-profile\",ref:dropdownRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profile-image\",src:user.profileImage||\"https://cdn-icons-png.flaticon.com/512/3135/3135715.png\",alt:\"User Profile\",onClick:()=>setDropdownOpen(!dropdownOpen)// ✅ Toggle dropdown on click\n}),dropdownOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-dropdown\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"dropdown-item logout\",onClick:handleLogout,children:\"Logout\"}),/*#__PURE__*/_jsx(\"p\",{className:\"dropdown-item fillprofile\",onClick:handleFillProfile,children:\"Update Profile\"})]})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"navbar-actions\",onClick:()=>navigate(\"/signup\"),children:/*#__PURE__*/_jsx(StylePrimarySmall,{className:\"navbar-signup-button\",text:\"Sign Up\"})})]})]})});};export default Navbar;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}